(()=>{"use strict";const e=async(e={})=>{const t=e.a_ctx.createBufferSource(),r=e.arrayBuffer.slice();return new Promise((a=>{e.a_ctx.decodeAudioData(r,(e=>{t.buffer=e,t.loop=!1,console.log("[info] completed to load audio"),a(t)}))}))},t=(e=null)=>{e.disabled=!e.disabled},r=(e=0)=>[("00"+parseInt(e/3600)).substr(-2),("00"+parseInt(e/60%60)).substr(-2),("00"+parseInt(e%60)).substr(-2),String(e).split(".").pop().substr(0,2)],a="./mp3/eine.mp3",o={a_ctx:null,source:null,arrayBuffer:null,a_ctx_start_time:0,a_ctx_paused_time:0};let n=!1,s=0;const c=window.AudioContext||window.webkitAudioContext;(async()=>{const u=async()=>{o.a_ctx=new c;try{o.arrayBuffer=await(async(e=null)=>{if(null==e)throw new Error(`[ERROR] fetchAudio: File Path is not Defined. file_location=[${e}]`);try{const t=await fetch(e);return await t.arrayBuffer()}catch(t){throw new Error(`[ERROR] fetchAudio: Something Occured during fetchg file. file_location=[${e}]`)}})(a)}catch(e){console.error(`[ERROR] allow_play: msg=[${JSON.stringify(e)}]`)}console.log(`[message] ${a} is loaded.`),o.source=await e(o),t(seek_bar)},i=()=>{o.a_ctx_start_time=o.a_ctx.currentTime-o.a_ctx_start_time},l=(e=0,t=0)=>{seek_bar.value=100*e/t;const[a,o,n,s]=r(e);seek_bar_text.innerHTML=`${a}:${o}:${n}:${s}`};(()=>{const a=document.querySelector("#seek_bar"),c=document.querySelector("span#seek_bar_text"),_=document.querySelector("#loadaudio_button"),d=document.querySelector("#start_stop_button");t(d),t(a),a.addEventListener("input",(async e=>{if(null!==typeof o.source.buffer.duration){const t=o.source.buffer.duration*e.target.value/100;o.a_ctx_paused_time=t;const[a,n,s,u]=r(t);c.innerHTML=`${a}:${n}:${s}:${u}`}})),_.addEventListener("mousedown",(async()=>{t(_);try{await u()}catch(e){console.error(`[ERROR] loadaudio_button: msg=[${JSON.stringify(e)}]`)}t(d)})),d.addEventListener("mousedown",(async()=>{n?(t(d),d.innerHTML="- - - -",i(),clearInterval(s),o.source.stop(0),o.source.buffer=null,o.source=await e(o),t(d),d.innerHTML="▶ Start",t(a)):(t(a),d.innerHTML="■ Stop",o.source.connect(o.a_ctx.destination),o.source.start(0,o.a_ctx_paused_time+o.a_ctx_start_time),i(),((e=(()=>{}))=>{s=setInterval((()=>{if(null!==o.source.buffer){const t=o.source.buffer.duration.toFixed(2),r=(o.a_ctx_paused_time+o.a_ctx.currentTime-o.a_ctx_start_time).toFixed(4);e(r,t)}}),30)})(l)),n=!n}))})()})()})();