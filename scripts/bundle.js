(()=>{"use strict";const t=async(t={})=>{const e=t.a_ctx.createBufferSource(),r=t.arrayBuffer.slice();return new Promise((o=>{t.a_ctx.decodeAudioData(r,(t=>{e.buffer=t,e.loop=!1,console.log("[info] completed to load audio"),o(e)}))}))},e=(t=null)=>{t.disabled=!t.disabled},r=(t=0)=>[("00"+parseInt(t/3600)).substr(-2),("00"+parseInt(t/60%60)).substr(-2),("00"+parseInt(t%60)).substr(-2),String(t).split(".").pop().substr(0,2)],o="./mp3/eine.mp3",a={a_ctx:null,source:null,arrayBuffer:null,a_ctx_start_time:0,a_ctx_paused_time:0};let n=!1,c=0;const s=window.AudioContext||window.webkitAudioContext;(async()=>{const u=document.querySelector("#seek_bar"),i=document.querySelector("span#seek_bar_text"),l=document.querySelector("#loadaudio_button"),d=document.querySelector("#start_stop_button");e(d),e(u);const _=()=>{a.a_ctx_start_time=a.a_ctx.currentTime-a.a_ctx_start_time},f=(t=0,e=0)=>{u.value=100*t/e;const[o,a,n,c]=r(t);i.innerHTML=`${o}:${a}:${n}:${c}`};u.addEventListener("input",(async t=>{if(void 0!==typeof a.source.buffer.duration){const e=a.source.buffer.duration*t.target.value/100;a.a_ctx_paused_time=e;const[o,n,c,s]=r(e);i.innerHTML=`${o}:${n}:${c}:${s}`}})),l.addEventListener("mousedown",(async()=>{e(l);try{await(async()=>{a.a_ctx=new s;try{a.arrayBuffer=await(async(t=null)=>{if(null==t)throw new Error(`[ERROR] fetchAudio: File Path is not Defined. file_location=[${t}]`);try{const e=await fetch(t);return await e.arrayBuffer()}catch(e){throw new Error(`[ERROR] fetchAudio: Something Occured during fetchg file. file_location=[${t}]`)}})(o)}catch(t){console.error(`[ERROR] allow_play: msg=[${JSON.stringify(t)}]`)}console.log(`[message] ${o} is loaded.`),a.source=await t(a),e(u)})()}catch(t){console.error(`[ERROR] loadaudio_button: msg=[${JSON.stringify(t)}]`)}e(d)})),d.addEventListener("mousedown",(async()=>{n?(e(d),d.innerHTML="- - - -",_(),clearInterval(c),a.source.stop(0),a.source.buffer=null,a.source=await t(a),e(d),d.innerHTML="▶ Start",e(u)):(e(u),d.innerHTML="■ Stop",a.source.connect(a.a_ctx.destination),a.source.start(0,a.a_ctx_paused_time+a.a_ctx_start_time),_(),((t=(()=>{}))=>{c=setInterval((()=>{if(null!==a.source.buffer){const e=a.source.buffer.duration.toFixed(2),r=(a.a_ctx_paused_time+a.a_ctx.currentTime-a.a_ctx_start_time).toFixed(4);t(r,e)}}),30)})(f)),n=!n}))})()})();