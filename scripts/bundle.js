(()=>{"use strict";const t=async(t={})=>{const e=t.a_ctx.createBufferSource(),r=t.arrayBuffer.slice();return new Promise((a=>{t.a_ctx.decodeAudioData(r,(t=>{e.buffer=t,e.loop=!1,console.log("[info] completed to load audio"),a(e)}))}))},e=(t=null)=>{t.disabled=!t.disabled},r=(t=0)=>[("00"+parseInt(t/3600)).substr(-2),("00"+parseInt(t/60%60)).substr(-2),("00"+parseInt(t%60)).substr(-2),String(t).split(".").pop().substr(0,2)],a="./mp3/eine.mp3",o={a_ctx:null,source:null,arrayBuffer:null,a_ctx_start_time:0,a_ctx_paused_time:0};let n=!1,c=0;const s=window.AudioContext||window.webkitAudioContext;(async()=>{const u=document.querySelector("#seek_bar"),i=document.querySelector("span#seek_bar_text"),l=document.querySelector("#loadaudio_button"),d=document.querySelector("#start_stop_button"),_=()=>{o.a_ctx_start_time=o.a_ctx.currentTime-o.a_ctx_start_time},f=(t=0,e=0)=>{u.value=100*t/e;const[a,o,n,c]=r(t);i.innerHTML=`${a}:${o}:${n}:${c}`};e(d),e(u),u.addEventListener("input",(async t=>{if(void 0!==typeof o.source.buffer.duration){const e=o.source.buffer.duration*t.target.value/100;o.a_ctx_paused_time=e;const[a,n,c,s]=r(e);i.innerHTML=`${a}:${n}:${c}:${s}`}})),l.addEventListener("mousedown",(async()=>{e(l);try{await(async()=>{o.a_ctx=new s;try{o.arrayBuffer=await(async(t=null)=>{if(null==t)throw new Error(`[ERROR] fetchAudio: File Path is not Defined. file_location=[${t}]`);try{const e=await fetch(t);return await e.arrayBuffer()}catch(e){throw new Error(`[ERROR] fetchAudio: Something Occured during fetchg file. file_location=[${t}]`)}})(a)}catch(t){console.error(`[ERROR] allow_play: msg=[${JSON.stringify(t)}]`)}console.log(`[message] ${a} is loaded.`),o.source=await t(o),e(u)})()}catch(t){console.error(`[ERROR] loadaudio_button: msg=[${JSON.stringify(t)}]`)}e(d)})),d.addEventListener("mousedown",(async()=>{n?(e(d),d.innerHTML="- - - -",_(),clearInterval(c),o.source.stop(0),o.source.buffer=null,o.source=await t(o),e(d),d.innerHTML="▶ Start",e(u)):(e(u),d.innerHTML="■ Stop",o.source.connect(o.a_ctx.destination),o.source.start(0,o.a_ctx_paused_time+o.a_ctx_start_time),_(),((t=(()=>{}))=>{c=setInterval((()=>{if(null!==o.source.buffer){const e=o.source.buffer.duration.toFixed(2),r=(o.a_ctx_paused_time+o.a_ctx.currentTime-o.a_ctx_start_time).toFixed(4);t(r,e)}}),30)})(f)),n=!n}))})()})();